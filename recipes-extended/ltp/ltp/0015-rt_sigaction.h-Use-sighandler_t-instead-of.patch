From abc7041e2cf8e0f3a0a6687e061eb56411e32c35 Mon Sep 17 00:00:00 2001
From: Christophe Priouzeau <christophe.priouzeau@st.com>
Date: Tue, 10 Jan 2017 09:58:44 +0100
Subject: [PATCH 15/19] rt_sigaction.h: Use sighandler_t instead of 
 __sighandler_t

When _GNU_SOURCE is used then both typedefs are same and using
sighandler_t makes it work on musl too

Signed-off-by: Khem Raj <raj.khem@gmail.com>
---
 include/lapi/rt_sigaction.h                      | 2 +-
 testcases/kernel/syscalls/rt_sigsuspend/Makefile | 3 +++
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/include/lapi/rt_sigaction.h b/include/lapi/rt_sigaction.h
index 66ccb3e..0c278fd 100644
--- a/include/lapi/rt_sigaction.h
+++ b/include/lapi/rt_sigaction.h
@@ -41,7 +41,7 @@ struct kernel_sigaction {
 };
 #else
 struct kernel_sigaction {
-	__sighandler_t k_sa_handler;
+	sighandler_t k_sa_handler;
 	unsigned long sa_flags;
 	void (*sa_restorer) (void);
 	sigset_t sa_mask;
diff --git a/testcases/kernel/syscalls/rt_sigsuspend/Makefile b/testcases/kernel/syscalls/rt_sigsuspend/Makefile
index 37bc3a9..2ca7f7c 100644
--- a/testcases/kernel/syscalls/rt_sigsuspend/Makefile
+++ b/testcases/kernel/syscalls/rt_sigsuspend/Makefile
@@ -19,4 +19,7 @@
 top_srcdir		?= ../../../..
 
 include $(top_srcdir)/include/mk/testcases.mk
+
+CFLAGS	+= -D_GNU_SOURCE
+
 include $(top_srcdir)/include/mk/generic_leaf_target.mk
-- 
2.7.4

