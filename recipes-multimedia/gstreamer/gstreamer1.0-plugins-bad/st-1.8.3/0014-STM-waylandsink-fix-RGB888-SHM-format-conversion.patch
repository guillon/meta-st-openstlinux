From 98163d16ffda522973336b315c520eba199459da Mon Sep 17 00:00:00 2001
From: Christophe Priouzeau <christophe.priouzeau@linaro.org>
Date: Thu, 7 Apr 2016 11:28:55 +0200
Subject: [PATCH 14/24] STM: waylandsink: fix RGB888 SHM format conversion

Consider the endianness when converting the RGB888 pixel format.

Change-Id: I55434afc4ba207d76fc98b4ab2147cc36b473fec
Signed-off-by: Fabien Dessenne <fabien.dessenne@st.com>
---
 ext/wayland/wlvideoformat.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/ext/wayland/wlvideoformat.c b/ext/wayland/wlvideoformat.c
index 1302da6..2067f9d 100644
--- a/ext/wayland/wlvideoformat.c
+++ b/ext/wayland/wlvideoformat.c
@@ -46,6 +46,8 @@ static const wl_VideoFormat formats[] = {
   {WL_SHM_FORMAT_ABGR8888, GST_VIDEO_FORMAT_ABGR},
   {WL_SHM_FORMAT_RGBA8888, GST_VIDEO_FORMAT_RGBA},
   {WL_SHM_FORMAT_BGRA8888, GST_VIDEO_FORMAT_BGRA},
+  {WL_SHM_FORMAT_RGB888, GST_VIDEO_FORMAT_RGB},
+  {WL_SHM_FORMAT_BGR888, GST_VIDEO_FORMAT_BGR},
 #else
   {WL_SHM_FORMAT_XRGB8888, GST_VIDEO_FORMAT_BGRx},
   {WL_SHM_FORMAT_ARGB8888, GST_VIDEO_FORMAT_BGRA},
@@ -55,9 +57,9 @@ static const wl_VideoFormat formats[] = {
   {WL_SHM_FORMAT_ABGR8888, GST_VIDEO_FORMAT_RGBA},
   {WL_SHM_FORMAT_RGBA8888, GST_VIDEO_FORMAT_ABGR},
   {WL_SHM_FORMAT_BGRA8888, GST_VIDEO_FORMAT_ARGB},
+  {WL_SHM_FORMAT_RGB888, GST_VIDEO_FORMAT_BGR},
+  {WL_SHM_FORMAT_BGR888, GST_VIDEO_FORMAT_RGB},
 #endif
-  {WL_SHM_FORMAT_RGB888, GST_VIDEO_FORMAT_RGB},
-  {WL_SHM_FORMAT_BGR888, GST_VIDEO_FORMAT_BGR},
   {WL_SHM_FORMAT_RGB565, GST_VIDEO_FORMAT_RGB16},
   {WL_SHM_FORMAT_BGR565, GST_VIDEO_FORMAT_BGR16},
 
-- 
2.7.4

