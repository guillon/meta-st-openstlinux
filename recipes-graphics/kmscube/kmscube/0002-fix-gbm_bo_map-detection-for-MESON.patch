From f2cdacc0ab0477858cfbe83af7feca95f7c70a28 Mon Sep 17 00:00:00 2001
From: Pierre-Yves MORDRET <pierre-yves.mordret@st.com>
Date: Thu, 5 Sep 2019 15:54:10 +0200
Subject: [PATCH 2/2] fix gbm_bo_map detection for MESON

The HAVE_GBM_BO_MAP flag was not created as a #define macro
for the source code

MESON build system

Signed-off-by: Pierre-Yves MORDRET <pierre-yves.mordret@st.com>
---
 meson.build | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/meson.build b/meson.build
index 8f1eed9..175e89f 100644
--- a/meson.build
+++ b/meson.build
@@ -86,4 +86,11 @@ else
   message('Building without gstreamer support')
 endif
 
+if dep_gbm.found()
+  add_project_arguments('-DHAVE_GBM_BO_MAP', language : 'c')
+  message('Building with gbm_bo_map support')
+else
+  message('Building without gbm_bo_map support')
+endif
+
 executable('kmscube', sources, dependencies : dep_common, install : true)
-- 
2.7.4

