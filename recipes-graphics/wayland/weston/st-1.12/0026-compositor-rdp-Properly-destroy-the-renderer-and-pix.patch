From a483cac1afafe59e49fb7e7c846943462206f06d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Armin=20Krezovi=C4=87?= <krezovic.armin@gmail.com>
Date: Fri, 30 Sep 2016 14:11:15 +0200
Subject: [PATCH 26/61] compositor-rdp: Properly destroy the renderer and
 pixman image
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Reviewed-by: Pekka Paalanen <pekka.paalanen@collabora.co.uk>
Signed-off-by: Armin KrezoviÄ‡ <krezovic.armin@gmail.com>
---
 libweston/compositor-rdp.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/libweston/compositor-rdp.c b/libweston/compositor-rdp.c
index d385a31..223382c 100644
--- a/libweston/compositor-rdp.c
+++ b/libweston/compositor-rdp.c
@@ -542,6 +542,9 @@ rdp_output_disable(struct weston_output *base)
 	if (!output->base.enabled)
 		return 0;
 
+	pixman_image_unref(output->shadow_surface);
+	pixman_renderer_output_destroy(&output->base);
+
 	wl_event_source_remove(output->finish_frame_timer);
 	b->output = NULL;
 
-- 
2.7.4

