From 0762878c48d541220e55ae685203f296f7abddb2 Mon Sep 17 00:00:00 2001
From: Vincent Abriou <vincent.abriou@st.com>
Date: Tue, 11 Oct 2016 09:51:54 +0200
Subject: [PATCH 45/61] compositor-st: add sprite and cursor logs when they are
 disabled/enabled

User can dynamically change the sprite or cursor configuration:
Ctrl + Shift + Space then c => disable/enable hardware cursor
Ctrl + Shift + Space then v => disable/enable sprites

Add logs to warn user of the current configuration when sprite or
cursor are disabled.

Change-Id: Iab39d5bfaaefea59aad09b33ad2978187474c819
Signed-off-by: Vincent Abriou <vincent.abriou@st.com>
---
 libweston/compositor-st.c | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/libweston/compositor-st.c b/libweston/compositor-st.c
index af4a340..ae22f36 100644
--- a/libweston/compositor-st.c
+++ b/libweston/compositor-st.c
@@ -3028,9 +3028,17 @@ planes_binding(struct weston_keyboard *keyboard, uint32_t time, uint32_t key,
 	case KEY_C:
 		b->cursors_are_broken[0] ^= 1;
 		b->cursors_are_broken[1] = b->cursors_are_broken[0];
+		if (b->cursors_are_broken[0])
+			weston_log("Software cursor.\n");
+		else
+			weston_log("Hardware cursor (if available).\n");
 		break;
 	case KEY_V:
 		b->sprites_are_broken ^= 1;
+		if (b->sprites_are_broken)
+			weston_log("Sprites are disabled.\n");
+		else
+			weston_log("Sprites are enabled.\n");
 		break;
 	case KEY_O:
 		b->sprites_hidden ^= 1;
-- 
2.7.4

