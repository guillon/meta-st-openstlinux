From acbbd3eb82263b1e907c2768833ba2c3433fe1f4 Mon Sep 17 00:00:00 2001
From: Vincent Abriou <vincent.abriou@st.com>
Date: Wed, 3 Aug 2016 10:53:38 +0200
Subject: [PATCH 36/61] compositor: add xlog debug info

Change-Id: Id912cfc9c1561bbd7bbd8fce8197526785a10986
Signed-off-by: Fabien Dessenne <fabien.dessenne@st.com>
---
 libweston/compositor.c | 2 ++
 libweston/compositor.h | 7 +++++++
 2 files changed, 9 insertions(+)

diff --git a/libweston/compositor.c b/libweston/compositor.c
index d552e18..6e7f1fc 100644
--- a/libweston/compositor.c
+++ b/libweston/compositor.c
@@ -2508,6 +2508,8 @@ surface_attach(struct wl_client *client,
 		}
 	}
 
+	weston_xlog("surface_attach surf=%p  wl_buf=%p\n", surface, buffer);
+
 	/* Attach, attach, without commit in between does not send
 	 * wl_buffer.release. */
 	weston_surface_state_set_buffer(&surface->pending, buffer);
diff --git a/libweston/compositor.h b/libweston/compositor.h
index 3e486d5..97cfd41 100644
--- a/libweston/compositor.h
+++ b/libweston/compositor.h
@@ -46,6 +46,13 @@ extern "C" {
 #include "zalloc.h"
 #include "timeline-object.h"
 
+//#define DEBUG_VERBOSE
+#ifdef DEBUG_VERBOSE
+#define weston_xlog(...) weston_log(__VA_ARGS__)
+#else
+#define weston_xlog(...) ((void)0)
+#endif
+
 struct weston_geometry {
 	int32_t x, y;
 	int32_t width, height;
-- 
2.7.4

